<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: DisplayElement.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: DisplayElement.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * Superclass defining standard methods for display elements
 */
export class DisplayElement {
  dom;
  hidden;
  /**
   * Create a new DisplayElement
   * @param {HTMLElement|string} element - an existing element, or HTML string to be converted to element
   * @param {boolean} hide - default true! You must .show() elements in order to see them.
   * @param {string} display - default 'flex'
   * @param {HTMLElement} parent - optional parent element, triggers appendChild
   */
  constructor({ element, hide = true, display = 'flex', parent = false }) {
    if (typeof element === 'string' || element instanceof String) {
      element = DisplayElement.htmlToElement(element);
    }
    this.dom = element;
    this.display = display;
    this.hidden = hide;
    this.dom.style.display = hide ? 'none' : this.display;
    if (parent) {
      parent.appendChild(this.dom);
    }
  }

  show() {
    this.dom.style.display = this.display;
    this.hidden = false;
  }

  hide() {
    this.dom.style.display = 'none';
    this.hidden = true;
  }

  expand() {
    // get the height of the element's inner content, regardless of its actual size
    let sectionHeight = this.dom.scrollHeight;
    // have the element transition to the height of its inner content
    this.dom.style.height = sectionHeight + 'px';
    // when the next css transition finishes (which should be the one we just triggered)
    this.transitioning = true;
    this.dom.addEventListener(
      'transitionend',
      () => {
        // remove "height" from the element's inline styles, so it can return to its initial value
        this.dom.style.height = null;
        this.transitioning = false;
      },
      { once: true }
    );
    this.collapsed = false;
  }

  collapse() {
    // get the height of the element's inner content, regardless of its actual size
    let sectionHeight = this.dom.scrollHeight;
    // temporarily disable all css transitions
    let elementTransition = this.dom.style.transition;
    this.dom.style.transition = '';
    // on the next frame (as soon as the previous style change has taken effect),
    // explicitly set the element's height to its current pixel height, so we
    // aren't transitioning out of 'auto', and put back the css transitions
    requestAnimationFrame(() => {
      this.dom.style.height = sectionHeight + 'px';
      this.dom.style.transition = elementTransition; // EC: shouldn't we set it to null?
      // on the next frame (as soon as the previous style change has taken effect),
      // have the element transition to height: 0
      requestAnimationFrame(() => {
        this.dom.style.height = 0;
        this.transitioning = true;
        this.dom.addEventListener(
          'transitionend',
          () => {
            this.transitioning = false;
          },
          { once: true }
        );
      });
    });
    this.collapsed = true;
  }

  /*
   * Change CSS display property
   * @param {DisplayElement | HTMLElement} element - target element
   * @param {String} [display=block] - value of display property
   */
  static show(element, display = 'flex') {
    if (element instanceof HTMLElement) {
      // once you set the CSS display property, it overrides HTML hidden attribute
      // so we can use the hidden attribute as needed.
      element.style.display = display;
      element.hidden = display === 'none';
    } else if (element.dom instanceof HTMLElement) {
      element.dom.style.display = display;
      element.hidden = display === 'none';
    } else {
      console.warn(
        'Neither element nor element.dom is not an instance of HTMLElement, so it cannot be shown or hidden.'
      );
    }
  }

  /**
   * Hide a DisplayElement by setting display property to 'none'
   * @param {DisplayElement} element - target element
   */
  static hide(element) {
    DisplayElement.show(element, 'none');
  }

  /**
   * Convert html string defining a single element to HTMLElement
   * @param {string} HTML representing a single element
   * @return {HTMLElement}
   */
  static htmlToElement(html) {
    let template = document.createElement('template');
    //html = html.trim(); // Never return a text node of whitespace as the result
    template.innerHTML = html;
    return template.content.firstElementChild; // this probably makes "html.trim" unnecessary
  }

  /**
   * Convert html string defining multiple sibling elements to a NodeList of HTMLElements
   * @param {string} HTML representing any number of sibling elements
   * @return {NodeList}
   */
  static htmlToElements(html) {
    let template = document.createElement('template');
    template.innerHTML = html;
    return template.content.childNodes;
  }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="BlockOptions_BlockOptions.html">BlockOptions</a></li><li><a href="Consent.html">Consent</a></li><li><a href="DisplayElement.html">DisplayElement</a></li><li><a href="Experiment_Experiment.html">Experiment</a></li><li><a href="Fullscreen.html">Fullscreen</a></li><li><a href="Goodbye.html">Goodbye</a></li><li><a href="MeshFactory.html">MeshFactory</a></li><li><a href="PBRMapper.html">PBRMapper</a></li><li><a href="Pointerlock.html">Pointerlock</a></li><li><a href="Progressbar.html">Progressbar</a></li><li><a href="SpiralCurve.html">SpiralCurve</a></li><li><a href="Survey.html">Survey</a></li></ul><h3>Global</h3><ul><li><a href="global.html#checkAlignment">checkAlignment</a></li><li><a href="global.html#computeMassSpringDamperParameters">computeMassSpringDamperParameters</a></li><li><a href="global.html#computeMassSpringDamperPosition">computeMassSpringDamperPosition</a></li><li><a href="global.html#generateDemoReaches">generateDemoReaches</a></li><li><a href="global.html#quantizeAngle">quantizeAngle</a></li><li><a href="global.html#randomNumericString">randomNumericString</a></li><li><a href="global.html#randomVectorFromCone">randomVectorFromCone</a></li><li><a href="global.html#required">required</a></li><li><a href="global.html#rotationHelper">rotationHelper</a></li><li><a href="global.html#rotationalClamp">rotationalClamp</a></li><li><a href="global.html#truncQuadCost">truncQuadCost</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Wed Mar 29 2023 15:11:44 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
